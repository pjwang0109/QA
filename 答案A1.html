document.addEventListener('DOMContentLoaded', ()=>{
    // div#root
    const root = document.querySelector('#root');

    // title
    const h2 = document.createElement('h2');
    h2.textContent = 'TEST TODO';

    // input
    const input = document.createElement('input');
    input.id = 'writeTodo' 
    input.type = 'text';
    
    // button 新增todo (可以移除，因為改成按 Enter 新增)
    // const addBtn = document.createElement('button');
    // addBtn.innerText = '新增待辦事項';
    // addBtn.style.margin = '0 20px';

    root.appendChild(h2);
    root.appendChild(input);
    // root.appendChild(addBtn); // 如果不想要按鈕，可以移除這行

    // 讓輸入框在頁面載入時自動獲得焦點
    input.focus();

    // todo 區塊
    const divBox = document.createElement('div');
    divBox.id = 'box';
    divBox.style.margin = '30px 0';
    root.appendChild(divBox);

    // 監聽鍵盤事件，按 Enter 時新增代辦事項
    input.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {  // 檢查是否按下 Enter
            addTodo();
        }
    });

    function addTodo() {
        const writeTodo = document.querySelector('#writeTodo'); // 取得 input 欄位

        // 檢查是否輸入內容
        if (writeTodo.value.trim() === '') return;

        // 每次點擊都新建一個 todoBox
        const todoBox = document.createElement('div');
        todoBox.classList.add('list');

        const span = document.createElement('span'); // 顯示填寫後的待辦事項文字
        span.textContent = writeTodo.value.trim();

        const todoDel = document.createElement('button'); // 刪除按鈕
        todoDel.classList.add('delete');
        todoDel.textContent = '刪除';

        // 刪除事件
        todoDel.addEventListener('click', ()=>{
            divBox.removeChild(todoBox);
        });

        // 建立 todo 結構
        todoBox.appendChild(span);
        todoBox.appendChild(todoDel);
        divBox.appendChild(todoBox);

        // 清空輸入框
        writeTodo.value = '';

        // 讓輸入框重新獲得焦點
        writeTodo.focus();
    }
});

