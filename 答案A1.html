// 查詢 btn 點擊事件處理程序
$("#queryBtn").click(function () {
  // 獲取身分證字號
  let inputId = $("#id-card").val();

  // 使用Ajax向API發送請求
  $.ajax({
    url: "http://localhost:8080/training/res/S010010001",
    method: "POST",
    dataType: "json",
    contentType: "application/json",
    data: JSON.stringify({ id: inputId }), // 根據需求調整傳遞的參數
    success: function (response) {
      // 如果API返回的資料中包含符合的身分證資料
      if (response.result) {
        // 將 API 返回的資料加入 DataTable 中
        dataTable.row.add({
          userid: response.result.userid,
          username: response.result.username,
          number: response.result.number,
          address: response.result.address,
          memo: response.result.memo,
        }).draw();

        // 將姓名、電話、地址、備註的資料填入相應的 input 欄位
        $("#name").val(response.result.username);
        $("#phone").val(response.result.number);
        $("#address").val(response.result.address);
        $("#memo").val(response.result.memo);

        console.log("成功:", "userid:", response.result.userid);
      } else {
        // 如果API返回的資料中不包含符合的身分證資料，則顯示自定義的訊息，而不是錯誤框
        console.log("查無此身分證資料。");
      }
    },
    error: function (error) {
      console.log("發生錯誤:", error);
    },
  });
});