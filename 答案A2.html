
// 建立 allFileJson 的快速查找結構（假設 allFileJson.result 是陣列）
let fileCheckFlagMap = {};
$.each(allFileJson.result, function (index, item) {
    fileCheckFlagMap[item.uf_no] = item.fileCheckFlag || ""; // 根據 uf_no 作為鍵，存儲 fileCheckFlag
});

// 遍歷 endResult，生成表格
$.each(endResult, function (index, result) {
    let fileCheckFlag = fileCheckFlagMap[result.uf_no] || ""; // 根據 uf_no 從映射中查找 fileCheckFlag

    // 建立 tr 元素，將 fileCheckFlag 放入
    let tr = '<tr>' +
        '<td>uf_no</td>'.replace('uf_no', result.uf_no) +
        '<td title="tDemo">file_type</td>'
            .replace('file_type', result.file_type)
            .replace('tDemo', result.uf_no) +
        '<td>filename_ori</td>'.replace('filename_ori', result.filename_ori) +
        '<td>uf_uid</td>'.replace('uf_uid', result.uf_uid) +
        '<td>uf_date</td>'.replace('uf_date', result.uf_date) +
        '<td>' +
        '<label class="cursor"><input type="button" class="hide" onclick="viewFile(this)"><i class="fas fa-file px-2"></i></label>' +
        '<label class="uploadLabel">' +
        '<input type="hidden" class="uploadText" value="file_type" isflag="fileCheckFlag"></label>'
            .replace('file_type', result.file_type)
            .replace('fileCheckFlag', fileCheckFlag) + // 替換 fileCheckFlag
        `<label>${fileCheckFlag}</label>` + // 顯示在 tr 中
        '</td></tr>';

    // 將 tr 加入到表格中
    $tableDiv.find('tbody').append(tr);
});